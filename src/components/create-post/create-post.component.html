<div class="max-w-3xl mx-auto p-6 bg-white rounded shadow-lg">
  <h2 class="text-2xl font-semibold mb-6">Create New Post</h2>

  <app-loading-spinner *ngIf="isLoading"></app-loading-spinner>

  <form [formGroup]="postForm" (ngSubmit)="onSubmit()" class="space-y-6">

    <mat-form-field appearance="fill" class="w-full">
      <mat-label>
        Title
        <span  [class.text-red-600]="postForm.get('title')?.invalid && (postForm.get('title')?.touched || submitted)" class="text-black"></span>
      </mat-label>
      <input
        matInput
        placeholder="Post title"
        formControlName="title"
      />
      <mat-error *ngIf="postForm.get('title')?.invalid && (postForm.get('title')?.touched || submitted)">
        <span *ngIf="postForm.get('title')?.hasError('required')">Title is required.</span>
        <span *ngIf="postForm.get('title')?.hasError('maxlength')">Max length 150 chars.</span>
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="w-full">
      <mat-label>
        Content
        <span  [class.text-red-600]="postForm.get('content')?.invalid && (postForm.get('content')?.touched || submitted)" class="text-black"></span>
      </mat-label>
      <textarea
        matInput
        rows="6"
        placeholder="Write your post content here..."
        formControlName="content"
      ></textarea>
      <mat-error *ngIf="postForm.get('content')?.invalid && (postForm.get('content')?.touched || submitted)">
        <span *ngIf="postForm.get('content')?.hasError('required')">Content is required.</span>
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="w-full">
      <mat-label>Tags (comma separated)</mat-label>
      <input
        matInput
        placeholder="Programming, Clean Code, Software"
        formControlName="tags"
      />
    </mat-form-field>

    <mat-form-field appearance="fill" class="w-full">
      <mat-label>Image URL</mat-label>
      <input
        matInput
        placeholder="https://example.com/image.jpg"
        formControlName="image"
      />
    </mat-form-field>

    <div class="mt-4 flex justify-center gap-2">
      <button class="btn-cancel" (click)="goBack()" type="button">Go Back</button>
      <button class="btn-add" type="submit" [disabled]="postForm.invalid">Create Post</button>
    </div>

  </form>
</div>
